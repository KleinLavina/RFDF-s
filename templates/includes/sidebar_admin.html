{% load static %}
<div class="rdfs-adm-sb">

  <!-- TOP (LOGO) -->
  <div class="rdfs-adm-sb__top">
    <a href="{% url 'accounts:admin_dashboard' %}" style="display: flex; align-items: center;">
      <img
        src="{% static 'img/RDFS-Logo-White.png' %}"
        alt="RDFS Logo"
        class="rdfs-adm-sb__logo"
      >
    </a>
  </div>

  <!-- MIDDLE (SCROLLABLE NAV) -->
  <nav class="rdfs-adm-sb__middle">
    <ul class="rdfs-adm-sb__nav">

      <!-- DASHBOARD -->
      <li class="rdfs-adm-sb__item">
        <a href="{% url 'accounts:admin_dashboard' %}" class="rdfs-adm-sb__link" data-title="Admin Dashboard">
          <i class="bi bi-house-door-fill"></i>
          <span>Admin Dashboard</span>
        </a>
      </li>

      <li class="rdfs-adm-sb__group">
        <button class="rdfs-adm-sb__group-toggle" type="button" aria-expanded="false" data-group="admin-manage-drivers">
          <span>
            <i class="bi bi-people-fill"></i>
            <span>Manage Drivers</span>
          </span>
          <i class="bi bi-chevron-down rdfs-adm-sb__group-chevron"></i>
        </button>
        <ul class="rdfs-adm-sb__group-list" aria-hidden="true">
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'vehicles:registered_drivers' %}" class="rdfs-adm-sb__link" data-title="Drivers">
              <i class="bi bi-people-fill"></i>
              <span>Drivers</span>
            </a>
          </li>
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'vehicles:register_driver' %}" class="rdfs-adm-sb__link" data-title="Add Driver">
              <i class="bi bi-person-plus-fill"></i>
              <span>Add Driver</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="rdfs-adm-sb__group">
        <button class="rdfs-adm-sb__group-toggle" type="button" aria-expanded="false" data-group="admin-manage-vehicles">
          <span>
            <i class="bi bi-truck-front-fill"></i>
            <span>Manage Vehicles</span>
          </span>
          <i class="bi bi-chevron-down rdfs-adm-sb__group-chevron"></i>
        </button>
        <ul class="rdfs-adm-sb__group-list" aria-hidden="true">
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'vehicles:registered_vehicles' %}" class="rdfs-adm-sb__link" data-title="Vehicles">
              <i class="bi bi-truck-front-fill"></i>
              <span>Vehicles</span>
            </a>
          </li>
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'vehicles:register_vehicle' %}" class="rdfs-adm-sb__link" data-title="Add Vehicle">
              <i class="bi bi-truck-front-fill"></i>
              <span>Add Vehicle</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="rdfs-adm-sb__group">
        <button class="rdfs-adm-sb__group-toggle" type="button" aria-expanded="false" data-group="admin-transactions">
          <span>
            <i class="bi bi-wallet2"></i>
            <span>Transactions</span>
          </span>
          <i class="bi bi-chevron-down rdfs-adm-sb__group-chevron"></i>
        </button>
        <ul class="rdfs-adm-sb__group-list" aria-hidden="true">
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'terminal:deposits' %}" class="rdfs-adm-sb__link" data-title="Deposits">
              <i class="bi bi-cash-stack"></i>
              <span>Deposits</span>
            </a>
          </li>
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'terminal:transactions' %}" class="rdfs-adm-sb__link" data-title="Transactions">
              <i class="bi bi-receipt-cutoff"></i>
              <span>Transactions</span>
            </a>
          </li>
        </ul>
      </li>
      
      <li class="rdfs-adm-sb__group">
        <button class="rdfs-adm-sb__group-toggle" type="button" aria-expanded="false" data-group="admin-reports">
          <span>
            <i class="bi bi-bar-chart-line"></i>
            <span>Reports</span>
          </span>
          <i class="bi bi-chevron-down rdfs-adm-sb__group-chevron"></i>
        </button>
        <ul class="rdfs-adm-sb__group-list" aria-hidden="true">
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'reports:reports_home' %}" class="rdfs-adm-sb__link" data-title="Reports Dashboard">
              <i class="bi bi-graph-up"></i>
              <span>Reports Dashboard</span>
            </a>
          </li>
        </ul>
      </li>

      <li class="rdfs-adm-sb__group">
        <button class="rdfs-adm-sb__group-toggle" type="button" aria-expanded="false" data-group="admin-settings">
          <span>
            <i class="bi bi-sliders2"></i>
            <span>Settings</span>
          </span>
          <i class="bi bi-chevron-down rdfs-adm-sb__group-chevron"></i>
        </button>
        <ul class="rdfs-adm-sb__group-list" aria-hidden="true">
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'accounts:manage_users' %}" class="rdfs-adm-sb__link" data-title="Accounts Access">
              <i class="bi bi-person-badge-fill"></i>
          <span>Accounts Access</span>
            </a>
          </li>
          <li class="rdfs-adm-sb__item">
            <a href="{% url 'terminal:system_and_routes' %}" class="rdfs-adm-sb__link" data-title="System & Routes">
              <i class="bi bi-gear-fill"></i>
              <span>System & Routes</span>
            </a>
          </li>
        </ul>
      </li>

    </ul>
  </nav>

  <!-- BOTTOM (LOGOUT) -->
  <div class="rdfs-adm-sb__bottom">
    <a href="{% url 'accounts:logout' %}" class="rdfs-adm-sb__link rdfs-adm-sb__logout" data-title="Logout">
      <i class="bi bi-door-closed-fill"></i>
      <span>Logout</span>
    </a>
  </div>

</div>


<!-- ===============================
     ADMIN SIDEBAR STYLES (SCOPED)
================================ -->
<style>
:root{
  --rdfs-adm-sb-blue:#112666;
  --rdfs-adm-sb-blue-dark:#0c1c4a;
  --rdfs-adm-sb-hover:rgba(255,255,255,.08);
  --rdfs-adm-sb-text:#ffffff;
  --rdfs-adm-sb-muted:rgba(255,255,255,.6);
  --rdfs-adm-sb-transition:.2s ease;
}

/* WRAPPER */
.rdfs-adm-sb{
  position:sticky;
  top:0;
  height:100vh;
  width:250px;
  background:linear-gradient(
    180deg,
    var(--rdfs-adm-sb-blue),
    var(--rdfs-adm-sb-blue-dark)
  );
  display:flex;
  flex-direction:column;
  transition: width .25s ease;
}

/* TOP */
.rdfs-adm-sb__top{
  padding:12px;
  display:flex;
  justify-content:center;
  align-items: center;
  min-height: 60px;
}

.rdfs-adm-sb__logo{
  width:175px;
  transition: width .25s ease;
}

/* MIDDLE */
.rdfs-adm-sb__middle{
  flex:1;
  overflow-y:auto;
  padding:4px 10px;

  /* hide scrollbar */
  scrollbar-width:none;
  -ms-overflow-style:none;
}
.rdfs-adm-sb__middle::-webkit-scrollbar{
  width:0;
  height:0;
}

/* NAV */
.rdfs-adm-sb__nav{
  list-style:none;
  padding:0;
  margin:0;
}

.rdfs-adm-sb__group {
  margin-bottom: 4px;
}

.rdfs-adm-sb__group-toggle {
  width: 100%;
  border: none;
  background: transparent;
  padding: 7px 10px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  color: var(--rdfs-adm-sb-text);
  font-weight: 600;
  cursor: pointer;
  text-align: left;
  transition: var(--rdfs-adm-sb-transition);
}

.rdfs-adm-sb__group-toggle span {
  display: flex;
  align-items: center;
  gap: 8px;
}

.rdfs-adm-sb__group-toggle:hover,
.rdfs-adm-sb__group-toggle:focus-visible {
  background: var(--rdfs-adm-sb-hover);
}

.rdfs-adm-sb__group-chevron {
  transition: transform .25s ease;
}

.rdfs-adm-sb__group-toggle[aria-expanded="true"] .rdfs-adm-sb__group-chevron {
  transform: rotate(180deg);
}

.rdfs-adm-sb__group-list {
  margin: 4px 0 0;
  padding: 0;
  list-style: none;
  max-height: 0;
  overflow: hidden;
  transition: max-height .25s ease;
}

.rdfs-adm-sb__group-list[aria-hidden="false"] {
  max-height: 400px;
}

.rdfs-adm-sb__group-list .rdfs-adm-sb__link {
  padding-left: 26px;
}

/* SECTION */
.rdfs-adm-sb__section{
  margin:10px 8px 4px;
  font-size:9px;
  text-transform:uppercase;
  letter-spacing:.8px;
  color:var(--rdfs-adm-sb-muted);
}

/* ITEM */
.rdfs-adm-sb__item{
  margin-bottom:2px;
}

/* LINK */
.rdfs-adm-sb__link{
  display:flex;
  align-items:center;
  gap:8px;
  padding:7px 10px;
  border-radius:8px;
  text-decoration:none;
  font-size:12.5px;
  font-weight:600;
  color:var(--rdfs-adm-sb-text);
  transition:var(--rdfs-adm-sb-transition);
  white-space: nowrap;
  overflow: hidden;
  position: relative;
}

.rdfs-adm-sb__link i{
  font-size:14px;
  min-width:18px;
  flex-shrink: 0;
}

.rdfs-adm-sb__link span{
  transition: opacity .2s ease;
}

.rdfs-adm-sb__link:hover,
.rdfs-adm-sb__link.active{
  background:var(--rdfs-adm-sb-hover);
  transform:translateX(2px);
}

/* Tooltip for collapsed state */
.app-shell.sidebar-collapsed .rdfs-adm-sb__link::after {
  content: attr(data-title);
  position: absolute;
  left: 100%;
  top: 50%;
  transform: translateY(-50%) translateX(8px);
  background: rgba(17, 38, 102, .95);
  color: #fff;
  border-radius: 6px;
  padding: 6px 12px;
  font-size: 12px;
  opacity: 0;
  pointer-events: none;
  white-space: nowrap;
  transition: opacity .2s ease, transform .2s ease;
  box-shadow: 0 2px 12px rgba(0, 0, 0, .2);
  z-index: 1000;
  margin-left: 8px;
}

.app-shell.sidebar-collapsed .rdfs-adm-sb__link:hover::after {
  opacity: 1;
  transform: translateY(-50%) translateX(12px);
}

/* BOTTOM */
.rdfs-adm-sb__bottom{
  padding:10px;
  border-top:1px solid rgba(255,255,255,.08);
}

.rdfs-adm-sb__logout{
  background:rgba(255,255,255,.06);
}

.rdfs-adm-sb__logout:hover{
  background:rgba(255,255,255,.14);
}
</style>
